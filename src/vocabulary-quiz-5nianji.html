<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯æ±‡æµ‹è¯• - äº”å¹´çº§è‹±è¯­ - ç«‹ä¿¡è‹±è¯­</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <style>
        .quiz-card {
            transition: transform 0.2s;
            cursor: pointer;
        }
        .quiz-card:hover {
            transform: translateY(-5px);
        }
        .progress-container {
            position: sticky;
            top: 70px;
            z-index: 1000;
            background: white;
            padding: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .question-card {
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .option-btn {
            transition: all 0.2s;
        }
        .option-btn:hover {
            transform: scale(1.02);
        }
        .result-card {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .timer {
            font-size: 1.2rem;
            font-weight: bold;
        }
        .flashcard {
            perspective: 1000px;
            height: 200px;
            margin: 20px 0;
        }
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-radius: 10px;
        }
        .flashcard-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .flashcard-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">ç«‹ä¿¡è‹±è¯­</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">é¦–é¡µ</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#about">å…³äº</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#services">æœåŠ¡</a></li>
                    <li class="nav-item"><a class="nav-link" href="si-nian-ji.html">æ–‡ç« </a></li>
                    <li class="nav-item"><a class="nav-link" href="wu-nian-ji.html">äº”å¹´çº§</a></li>
                    <!-- ç™»å½•çŠ¶æ€æ˜¾ç¤º - æ·»åŠ çš„éƒ¨åˆ† -->
                    <li class="nav-item">
                        <span id="user-info" class="navbar-text me-2 d-none"></span>
                        <a href="profile.html" class="btn btn-outline-primary btn-sm me-1 d-none" id="profile-btn">ä¸ªäººä¸­å¿ƒ</a>
                        <a href="learning-records.html" class="btn btn-outline-info btn-sm me-1 d-none" id="records-btn">å­¦ä¹ è®°å½•</a>
                        <a href="admin-vocabulary.html" class="btn btn-outline-warning btn-sm me-1 d-none" id="admin-btn">ç®¡ç†å‘˜</a>
                        <button id="login-btn" class="btn btn-outline-primary btn-sm me-1">ç™»å½•</button>
                        <button id="logout-btn" class="btn btn-outline-secondary btn-sm d-none">ç™»å‡º</button>
                    </li>
                    <!-- ç™»å½•çŠ¶æ€æ˜¾ç¤ºç»“æŸ -->
                    <li class="nav-item"><a class="nav-link" href="index.html#contact">è”ç³»</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- é¡µé¢å†…å®¹ -->
    <div class="container mt-5 pt-5">
        <div class="row">
            <!-- ä¾§è¾¹æ  -->
            <div class="col-lg-3 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5>äº”å¹´çº§è‹±è¯­</h5>
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="wu-nian-ji.html" class="list-group-item list-group-item-action">
                            è¿”å›ä¸»é¡µé¢
                        </a>
                        <a href="translation-practice-5nianji.html" class="list-group-item list-group-item-action">
                            ç¿»è¯‘ç‰¹è®­
                        </a>
                        <a href="core-vocabulary-5nianji.html" class="list-group-item list-group-item-action">
                            æ ¸å¿ƒè¯æ±‡ç§¯ç´¯
                        </a>
                        <a href="vocabulary-quiz-5nianji.html" class="list-group-item list-group-item-action active">
                            è¯æ±‡æµ‹è¯•
                        </a>
                        <a href="si-nian-ji.html" class="list-group-item list-group-item-action">
                            â† è¿”å›æ–‡ç« 
                        </a>
                    </div>
                </div>
            </div>
            <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
            <div class="col-lg-9">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html">é¦–é¡µ</a></li>
                        <li class="breadcrumb-item"><a href="si-nian-ji.html">æ–‡ç« </a></li>
                        <li class="breadcrumb-item"><a href="wu-nian-ji.html">äº”å¹´çº§</a></li>
                        <li class="breadcrumb-item active">è¯æ±‡æµ‹è¯•</li>
                    </ol>
                </nav>
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>äº”å¹´çº§è¯æ±‡æµ‹è¯•</h2>
                    <div class="btn-group">
                        <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="bi bi-funnel"></i> ç­›é€‰
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="vocabularyQuiz.filterQuiz('all')">å…¨éƒ¨è¯æ±‡</a></li>
                            <li><a class="dropdown-item" href="#" onclick="vocabularyQuiz.filterQuiz('new')">æ–°å­¦è¯æ±‡</a></li>
                            <li><a class="dropdown-item" href="#" onclick="vocabularyQuiz.filterQuiz('review')">å¤ä¹ è¯æ±‡</a></li>
                            <li><a class="dropdown-item" href="#" onclick="vocabularyQuiz.filterQuiz('mastered')">å·²æŒæ¡</a></li>
                        </ul>
                    </div>
                </div>
                <!-- æµ‹è¯•è¿›åº¦ -->
                <div class="progress-container mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>æµ‹è¯•è¿›åº¦</span>
                        <span id="progress-text">0/0</span>
                    </div>
                    <div class="progress">
                        <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                    </div>
                </div>
                <!-- è¯æ±‡æµ‹è¯•å†…å®¹ -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h4 class="mb-0">è¯æ±‡æµ‹è¯•</h4>
                        <div class="timer" id="timer">â±ï¸ <span id="time-left">00:00</span></div>
                    </div>
                    <div class="card-body">
                        <div id="message" class="alert d-none" role="alert"></div>
                        <!-- æµ‹è¯•å¼€å§‹ç•Œé¢ -->
                        <div id="start-quiz-tab" class="tab-content">
                            <div class="text-center">
                                <h5>å¼€å§‹è¯æ±‡æµ‹è¯•</h5>
                                <p class="lead mb-4">åŸºäºæ‚¨å·²å­¦çš„è¯æ±‡è¿›è¡Œæµ‹è¯•ï¼Œå·©å›ºå­¦ä¹ æˆæœ</p>
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-primary text-white">
                                            <div class="card-body text-center">
                                                <h6 class="card-title">æ€»æµ‹è¯•æ•°</h6>
                                                <h2 class="mb-0" id="total-tests">0</h2>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="card bg-success text-white">
                                            <div class="card-body text-center">
                                                <h6 class="card-title">æ­£ç¡®ç‡</h6>
                                                <h2 class="mb-0" id="accuracy-rate">0%</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <h6>é€‰æ‹©æµ‹è¯•ç±»å‹</h6>
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <div class="card quiz-card">
                                                <div class="card-body text-center">
                                                    <div class="bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                                        <span class="fs-4">ğŸ”¤</span>
                                                    </div>
                                                    <h6 class="card-title">ä¸­è¯‘è‹±</h6>
                                                    <p class="card-text small">æ ¹æ®ä¸­æ–‡æ„æ€é€‰æ‹©æ­£ç¡®çš„è‹±æ–‡å•è¯</p>
                                                    <button class="btn btn-primary" onclick="vocabularyQuiz.startQuiz('chinese-to-english')">
                                                        å¼€å§‹æµ‹è¯•
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="card quiz-card">
                                                <div class="card-body text-center">
                                                    <div class="bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                                        <span class="fs-4">ğŸ“–</span>
                                                    </div>
                                                    <h6 class="card-title">è‹±è¯‘ä¸­</h6>
                                                    <p class="card-text small">æ ¹æ®è‹±æ–‡å•è¯é€‰æ‹©æ­£ç¡®çš„ä¸­æ–‡æ„æ€</p>
                                                    <button class="btn btn-success" onclick="vocabularyQuiz.startQuiz('english-to-chinese')">
                                                        å¼€å§‹æµ‹è¯•
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mb-3">
                                            <div class="card quiz-card">
                                                <div class="card-body text-center">
                                                    <div class="bg-info text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3" style="width: 60px; height: 60px;">
                                                        <span class="fs-4">âŒ¨ï¸</span>
                                                    </div>
                                                    <h6 class="card-title">æ‹¼å†™æµ‹è¯•</h6>
                                                    <p class="card-text small">æ ¹æ®ä¸­æ–‡æ„æ€æ‹¼å†™å‡ºæ­£ç¡®çš„è‹±æ–‡å•è¯</p>
                                                    <button class="btn btn-info" onclick="vocabularyQuiz.startQuiz('spelling')">
                                                        å¼€å§‹æµ‹è¯•
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="alert alert-info">
                                    <h6><i class="bi bi-info-circle"></i> æµ‹è¯•è¯´æ˜</h6>
                                    <ul class="mb-0">
                                        <li>æµ‹è¯•åŸºäºæ‚¨å·²å­¦ä¹ çš„æ ¸å¿ƒè¯æ±‡</li>
                                        <li>æ¯æ¬¡æµ‹è¯•åŒ…å«10ä¸ªé¢˜ç›®</li>
                                        <li>æµ‹è¯•å®Œæˆåä¼šæ˜¾ç¤ºæˆç»©å’Œè¯¦ç»†åˆ†æ</li>
                                        <li>ç³»ç»Ÿä¼šæ ¹æ®æµ‹è¯•ç»“æœè°ƒæ•´å¤ä¹ è®¡åˆ’</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- æµ‹è¯•è¿›è¡Œä¸­ç•Œé¢ -->
                        <div id="quiz-progress-tab" class="tab-content d-none">
                            <div class="question-card">
                                <div id="question-container">
                                    <div class="text-center">
                                        <div class="spinner-border" role="status">
                                            <span class="visually-hidden">åŠ è½½ä¸­...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- æµ‹è¯•ç»“æœç•Œé¢ -->
                        <div id="quiz-results-tab" class="tab-content d-none">
                            <div class="result-card">
                                <div id="results-container">
                                    <!-- ç»“æœå°†åŠ¨æ€åŠ è½½ -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- æµ‹è¯•å†å²è®°å½• -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">æµ‹è¯•å†å²è®°å½•</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>æµ‹è¯•ç±»å‹</th>
                                        <th>æ—¥æœŸ</th>
                                        <th>é¢˜ç›®æ•°</th>
                                        <th>æ­£ç¡®æ•°</th>
                                        <th>å¾—åˆ†</th>
                                        <th>è€—æ—¶</th>
                                        <th>æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody id="quiz-history-table">
                                    <tr>
                                        <td colspan="7" class="text-center">åŠ è½½ä¸­...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <nav aria-label="æµ‹è¯•å†å²åˆ†é¡µ">
                            <ul class="pagination justify-content-center" id="quiz-history-pagination">
                                <!-- åˆ†é¡µå°†åŠ¨æ€ç”Ÿæˆ -->
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- é¡µè„š -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">Â© 2024 ç«‹ä¿¡è‹±è¯­. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">ç”¨å¿ƒæ‰“é€ é«˜æ•ˆè‹±è¯­å­¦ä¹ å¹³å°</p>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="api.js"></script>
    <script>
        // --- è¯æ±‡æµ‹è¯•ç³»ç»Ÿ - äº”å¹´çº§ç‰ˆæœ¬ - ä¿®å¤ç‰ˆ ---
        class VocabularyQuizSystem {
            constructor() {
                this.vocabulary = [];
                this.quizQuestions = [];
                this.currentQuestionIndex = 0;
                this.quizScore = 0;
                this.quizMode = '';
                this.startTime = null;
                this.endTime = null;
                this.timerInterval = null;
                this.timeLeft = 300; // 5åˆ†é’Ÿå€’è®¡æ—¶
                this.quizHistory = [];
                this.currentPage = 1;
                this.pageSize = 10;
                this.totalPages = 0;
                // --- ä¿®æ”¹1: ç¡®ä¿ API_BASE_URL æŒ‡å‘æ­£ç¡®çš„åç«¯åœ°å€ ---
                this.apiBaseUrl = 'http://localhost:3000/api'; // ç¡®ä¿æ­¤åœ°å€ä¸æ‚¨çš„åç«¯æœåŠ¡å™¨åœ°å€åŒ¹é…
            }
            // åˆå§‹åŒ–æµ‹è¯•ç³»ç»Ÿ
            async init() {
                await this.checkLogin();
                await this.loadUserVocabulary(); // åŠ è½½äº”å¹´çº§è¯æ±‡
                await this.loadQuizHistory(); // ä¿®å¤ï¼šåŠ è½½çœŸå®çš„æµ‹è¯•å†å²è®°å½•
                this.updateStatistics();
            }
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            async checkLogin() {
                const token = localStorage.getItem('token');
                if (!token) {
                    window.location.href = 'login.html';
                    return false;
                }
                try {
                    const result = await apiService.getUserInfo();
                    this.updateUIForUser(result.user);
                    return result.user;
                } catch (error) {
                    console.error('TokenéªŒè¯å¤±è´¥:', error);
                    apiService.logout();
                    window.location.href = 'login.html';
                    return false;
                }
            }
            // æ ¹æ®ç”¨æˆ·çŠ¶æ€æ›´æ–°UI
            updateUIForUser(user) {
                const userInfo = document.getElementById('user-info');
                const profileBtn = document.getElementById('profile-btn');
                const recordsBtn = document.getElementById('records-btn');
                const adminBtn = document.getElementById('admin-btn');
                const loginBtn = document.getElementById('login-btn');
                const logoutBtn = document.getElementById('logout-btn');
                if (user) {
                    // ç”¨æˆ·å·²ç™»å½•
                    userInfo.textContent = `æ¬¢è¿, ${user.name || user.email}`;
                    userInfo.classList.remove('d-none');
                    profileBtn.classList.remove('d-none');
                    recordsBtn.classList.remove('d-none');
                    loginBtn.classList.add('d-none');
                    logoutBtn.classList.remove('d-none');
                    // æ£€æŸ¥æ˜¯å¦ä¸ºç®¡ç†å‘˜
                    const adminEmails = ['admin@example.com', 'admin@liuxinenglish.com'];
                    if (adminEmails.includes(user.email)) {
                        adminBtn.classList.remove('d-none');
                    } else {
                        adminBtn.classList.add('d-none');
                    }
                } else {
                    // ç”¨æˆ·æœªç™»å½•
                    userInfo.classList.add('d-none');
                    profileBtn.classList.add('d-none');
                    recordsBtn.classList.add('d-none');
                    adminBtn.classList.add('d-none');
                    loginBtn.classList.remove('d-none');
                    logoutBtn.classList.add('d-none');
                }
            }
            // åŠ è½½ç”¨æˆ·å·²å­¦è¯æ±‡ (äº”å¹´çº§)
            async loadUserVocabulary() {
                try {
                    const token = localStorage.getItem('token');
                    if (!token) {
                        throw new Error('è¯·å…ˆç™»å½•');
                    }
                    console.log('å¼€å§‹ä»åç«¯åŠ è½½äº”å¹´çº§ç”¨æˆ·è¯æ±‡...');
                    // --- ä¿®æ”¹2: è°ƒç”¨åç«¯APIè·å–äº”å¹´çº§æ ¸å¿ƒè¯æ±‡ ---
                    const response = await fetch(`${this.apiBaseUrl}/core-vocabulary/daily?count=50&category=grade5`, {
                        method: 'GET',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    console.log('åç«¯å“åº”çŠ¶æ€ (äº”å¹´çº§è¯æ±‡):', response.status);
                    // æ£€æŸ¥å“åº”å†…å®¹ç±»å‹
                    const contentType = response.headers.get('content-type');
                    console.log('å“åº”å†…å®¹ç±»å‹ (äº”å¹´çº§è¯æ±‡):', contentType);
                    if (!contentType || !contentType.includes('application/json')) {
                        const text = await response.text();
                        console.error('æœåŠ¡å™¨è¿”å›éJSONå“åº”:', text.substring(0, 200));
                        throw new Error('æœåŠ¡å™¨è¿”å›äº†é”™è¯¯å“åº”ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ');
                    }
                    const result = await response.json();
                    console.log('åç«¯å“åº”æ•°æ® (äº”å¹´çº§è¯æ±‡):', result);
                    if (result.success) {
                        this.vocabulary = result.vocabulary || [];
                        console.log('æˆåŠŸåŠ è½½äº”å¹´çº§è¯æ±‡:', this.vocabulary.length, 'ä¸ª');
                    } else {
                        throw new Error(result.error || 'è·å–è¯æ±‡å¤±è´¥');
                    }
                } catch (error) {
                    console.error('åŠ è½½ç”¨æˆ·è¯æ±‡å¤±è´¥:', error);
                    // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºåå¤‡ (äº”å¹´çº§è¯æ±‡ç¤ºä¾‹)
                    this.vocabulary = this.getMockVocabulary();
                }
            }
            // è·å–æ¨¡æ‹Ÿäº”å¹´çº§è¯æ±‡æ•°æ®
            getMockVocabulary() {
                return [
                    {
                        _id: '801',
                        word: "analyze",
                        pronunciation: "/ËˆÃ¦nÉ™laÉªz/",
                        translation: "åˆ†æ",
                        partOfSpeech: "åŠ¨è¯",
                        example: "Scientists analyze data to find patterns.",
                        exampleTranslation: "ç§‘å­¦å®¶åˆ†ææ•°æ®ä»¥å¯»æ‰¾è§„å¾‹ã€‚",
                        difficulty: "intermediate",
                        category: "academic",
                        tags: ["å­¦æœ¯è¯æ±‡", "ç§‘å­¦æ–¹æ³•"]
                    },
                    {
                        _id: '802',
                        word: "significant",
                        pronunciation: "/sÉªÉ¡ËˆnÉªfÉªkÉ™nt/",
                        translation: "é‡è¦çš„ï¼Œæœ‰æ„ä¹‰çš„",
                        partOfSpeech: "å½¢å®¹è¯",
                        example: "There was a significant improvement after the training.",
                        exampleTranslation: "åŸ¹è®­åæœ‰äº†æ˜¾è‘—çš„æ”¹è¿›ã€‚",
                        difficulty: "intermediate",
                        category: "description",
                        tags: ["æè¿°è¯æ±‡", "æ­£å¼ç”¨è¯­"]
                    },
                    {
                        _id: '803',
                        word: "perspective",
                        pronunciation: "/pÉ™rËˆspektÉªv/",
                        translation: "è§‚ç‚¹ï¼Œè§†è§’ï¼›é€è§†",
                        partOfSpeech: "åè¯",
                        example: "Try to see it from his perspective.",
                        exampleTranslation: "è¯•ç€ä»ä»–çš„è§’åº¦çœ‹é—®é¢˜ã€‚",
                        difficulty: "advanced",
                        category: "thinking",
                        tags: ["æ€ç»´è¯æ±‡", "å“²å­¦"]
                    },
                    {
                        _id: '804',
                        word: "phenomenon",
                        pronunciation: "/fÉ™ËˆnÉ‘ËmÉªnÉ™n/",
                        translation: "ç°è±¡",
                        partOfSpeech: "åè¯",
                        example: "The Northern Lights are a natural phenomenon.",
                        exampleTranslation: "åŒ—æå…‰æ˜¯ä¸€ç§è‡ªç„¶ç°è±¡ã€‚",
                        difficulty: "advanced",
                        category: "science",
                        tags: ["ç§‘å­¦è¯æ±‡", "å•å¤æ•°phenomena"]
                    },
                    {
                        _id: '805',
                        word: "sophisticated",
                        pronunciation: "/sÉ™ËˆfÉªstÉªkeÉªtÉªd/",
                        translation: "å¤æ‚çš„ï¼Œç²¾å¯†çš„ï¼›è€ç»ƒçš„",
                        partOfSpeech: "å½¢å®¹è¯",
                        example: "This camera has sophisticated features.",
                        exampleTranslation: "è¿™å°ç›¸æœºæœ‰å¤æ‚çš„åŠŸèƒ½ã€‚",
                        difficulty: "advanced",
                        category: "technology",
                        tags: ["ç§‘æŠ€è¯æ±‡", "æ­£å¼ç”¨è¯­"]
                    }
                ];
            }
            // å¼€å§‹æµ‹è¯•
            async startQuiz(mode) {
                try {
                    const token = localStorage.getItem('token');
                    if (!token) {
                        alert('è¯·å…ˆç™»å½•è·å–è®¿é—®æƒé™');
                        window.location.href = 'login.html';
                        return;
                    }
                    this.quizMode = mode;
                    this.currentQuestionIndex = 0;
                    this.quizScore = 0;
                    this.startTime = new Date();
                    this.timeLeft = 300; // 5åˆ†é’Ÿå€’è®¡æ—¶
                    // ç”Ÿæˆæµ‹è¯•é¢˜ç›®
                    await this.generateQuizQuestions();
                    // æ˜¾ç¤ºæµ‹è¯•ç•Œé¢
                    this.showQuizInterface();
                    // å¼€å§‹è®¡æ—¶
                    this.startTimer();
                } catch (error) {
                    console.error('å¼€å§‹æµ‹è¯•å¤±è´¥:', error);
                    this.showMessage('å¼€å§‹æµ‹è¯•å¤±è´¥ï¼š' + error.message, 'danger');
                }
            }
            // ç”Ÿæˆæµ‹è¯•é¢˜ç›®
            async generateQuizQuestions() {
                this.quizQuestions = [];
                const shuffledVocabulary = [...this.vocabulary].sort(() => Math.random() - 0.5);
                shuffledVocabulary.slice(0, 10).forEach(word => {
                    let question = {};
                    switch(this.quizMode) {
                        case 'chinese-to-english':
                            question = {
                                type: 'chinese-to-english',
                                question: `"${word.translation}" çš„è‹±æ–‡æ˜¯ä»€ä¹ˆï¼Ÿ`,
                                correctAnswer: word.word.toLowerCase(),
                                options: this.generateOptions(word.word, 'english'),
                                word: word
                            };
                            break;
                        case 'english-to-chinese':
                            question = {
                                type: 'english-to-chinese',
                                question: `"${word.word}" çš„ä¸­æ–‡æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ`,
                                correctAnswer: word.translation,
                                options: this.generateOptions(word.translation, 'chinese'),
                                word: word
                            };
                            break;
                        case 'spelling':
                            question = {
                                type: 'spelling',
                                question: `è¯·æ‹¼å†™å•è¯ï¼š${word.translation}`,
                                correctAnswer: word.word.toLowerCase(),
                                word: word
                            };
                            break;
                    }
                    this.quizQuestions.push(question);
                });
            }
            // ç”Ÿæˆé€‰é¡¹
            generateOptions(correctAnswer, type) {
                const options = [correctAnswer];
                const allAnswers = type === 'english' 
                    ? this.vocabulary.map(w => w.word) 
                    : this.vocabulary.map(w => w.translation);
                const wrongAnswers = allAnswers
                    .filter(answer => answer !== correctAnswer)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3);
                return [...options, ...wrongAnswers].sort(() => Math.random() - 0.5);
            }
            // æ˜¾ç¤ºæµ‹è¯•ç•Œé¢
            showQuizInterface() {
                document.getElementById('start-quiz-tab').classList.add('d-none');
                document.getElementById('quiz-progress-tab').classList.remove('d-none');
                document.getElementById('quiz-results-tab').classList.add('d-none');
                this.showQuizQuestion();
            }
            // æ˜¾ç¤ºæµ‹è¯•é—®é¢˜
            showQuizQuestion() {
                const questionContainer = document.getElementById('question-container');
                const question = this.quizQuestions[this.currentQuestionIndex];
                if (!question) {
                    this.endQuiz();
                    return;
                }
                let html = `
                    <div class="text-center">
                        <h5>æµ‹è¯•è¿›è¡Œä¸­ (${this.currentQuestionIndex + 1}/${this.quizQuestions.length})</h5>
                        <p class="lead mb-4">${question.question}</p>
                `;
                if (this.quizMode === 'spelling') {
                    html += `
                        <div class="mb-3">
                            <input type="text" class="form-control" id="answerInput" placeholder="è¯·è¾“å…¥ç­”æ¡ˆ">
                        </div>
                        <button class="btn btn-primary" onclick="vocabularyQuiz.checkSpellingAnswer()">
                            <span id="submitBtnText">æäº¤</span>
                            <span id="submitBtnLoading" class="spinner-border spinner-border-sm d-none" role="status"></span>
                        </button>
                    `;
                } else {
                    html += '<div class="row">';
                    question.options.forEach((option, index) => {
                        html += `
                            <div class="col-md-6 mb-2">
                                <button class="btn btn-outline-primary option-btn w-100" onclick="vocabularyQuiz.checkMultipleChoiceAnswer('${option}')">
                                    ${option}
                                </button>
                            </div>
                        `;
                    });
                    html += '</div>';
                }
                html += '</div>';
                questionContainer.innerHTML = html;
            }
            // æ£€æŸ¥æ‹¼å†™ç­”æ¡ˆ
            async checkSpellingAnswer() {
                const input = document.getElementById('answerInput');
                const answer = input.value.trim().toLowerCase();
                const question = this.quizQuestions[this.currentQuestionIndex];
                const submitBtn = document.getElementById('submitBtnText').parentElement;
                const submitBtnText = document.getElementById('submitBtnText');
                const submitBtnLoading = document.getElementById('submitBtnLoading');
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                submitBtn.disabled = true;
                submitBtnText.classList.add('d-none');
                submitBtnLoading.classList.remove('d-none');
                let isCorrect = false;
                if (answer === question.correctAnswer) {
                    this.quizScore++;
                    this.showMessage('å›ç­”æ­£ç¡®ï¼', 'success');
                    isCorrect = true;
                } else {
                    this.showMessage(`å›ç­”é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${question.correctAnswer}`, 'danger');
                }
                // æ›´æ–°å­¦ä¹ è®°å½• (æ¨¡æ‹Ÿ)
                try {
                    const token = localStorage.getItem('token');
                    if (token) {
                         await fetch(`${this.apiBaseUrl}/core-vocabulary/record`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                vocabularyId: question.word._id,
                                status: 'reviewing',
                                isCorrect: isCorrect
                            })
                        });
                    }
                } catch (error) {
                    console.error('æ›´æ–°å­¦ä¹ è®°å½•å¤±è´¥:', error);
                }
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                submitBtn.disabled = false;
                submitBtnText.classList.remove('d-none');
                submitBtnLoading.classList.add('d-none');
                this.currentQuestionIndex++;
                setTimeout(() => {
                    this.showQuizQuestion();
                }, 1500);
            }
            // æ£€æŸ¥é€‰æ‹©é¢˜ç­”æ¡ˆ
            async checkMultipleChoiceAnswer(selectedAnswer) {
                const question = this.quizQuestions[this.currentQuestionIndex];
                let isCorrect = false;
                if (selectedAnswer === question.correctAnswer) {
                    this.quizScore++;
                    this.showMessage('å›ç­”æ­£ç¡®ï¼', 'success');
                    isCorrect = true;
                } else {
                    this.showMessage(`å›ç­”é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${question.correctAnswer}`, 'danger');
                }
                // æ›´æ–°å­¦ä¹ è®°å½• (æ¨¡æ‹Ÿ)
                try {
                    const token = localStorage.getItem('token');
                    if (token) {
                         await fetch(`${this.apiBaseUrl}/core-vocabulary/record`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                vocabularyId: question.word._id,
                                status: 'reviewing',
                                isCorrect: isCorrect
                            })
                        });
                    }
                } catch (error) {
                    console.error('æ›´æ–°å­¦ä¹ è®°å½•å¤±è´¥:', error);
                }
                this.currentQuestionIndex++;
                setTimeout(() => {
                    this.showQuizQuestion();
                }, 1500);
            }
            // æ˜¾ç¤ºæ¶ˆæ¯
            showMessage(text, type) {
                const messageDiv = document.getElementById('message');
                messageDiv.textContent = text;
                messageDiv.className = `alert alert-${type} d-block`;
                setTimeout(() => {
                    messageDiv.classList.add('d-none');
                }, 3000);
            }
            // å¼€å§‹è®¡æ—¶å™¨
            startTimer() {
                clearInterval(this.timerInterval);
                this.timerInterval = setInterval(() => {
                    this.timeLeft--;
                    const minutes = Math.floor(this.timeLeft / 60);
                    const seconds = this.timeLeft % 60;
                    document.getElementById('time-left').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    if (this.timeLeft <= 0) {
                        this.endQuiz();
                    }
                }, 1000);
            }
            // ç»“æŸæµ‹è¯•
            endQuiz() {
                clearInterval(this.timerInterval);
                this.endTime = new Date();
                this.showQuizResults();
                this.saveQuizRecord(); // ä¿®å¤ï¼šä¿å­˜æµ‹è¯•è®°å½•
            }
            // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
            showQuizResults() {
                document.getElementById('quiz-progress-tab').classList.add('d-none');
                document.getElementById('quiz-results-tab').classList.remove('d-none');
                const resultsContainer = document.getElementById('results-container');
                const percentage = Math.round((this.quizScore / this.quizQuestions.length) * 100);
                const timeTaken = Math.round((this.endTime - this.startTime) / 1000);
                resultsContainer.innerHTML = `
                    <div class="text-center">
                        <h3>æµ‹è¯•å®Œæˆï¼</h3>
                        <div class="mb-3">
                            <div class="display-4 text-${percentage >= 80 ? 'success' : percentage >= 60 ? 'warning' : 'danger'}">
                                ${percentage}%
                            </div>
                            <p>å¾—åˆ†ï¼š${this.quizScore}/${this.quizQuestions.length}</p>
                            <p>ç”¨æ—¶ï¼š${Math.floor(timeTaken / 60)}åˆ†${timeTaken % 60}ç§’</p>
                        </div>
                        <div class="mb-3">
                            ${percentage >= 80 ? 
                                '<div class="alert alert-success">ä¼˜ç§€ï¼ç»§ç»­ä¿æŒï¼</div>' : 
                                percentage >= 60 ? 
                                '<div class="alert alert-warning">ä¸é”™ï¼Œä½†è¿˜æœ‰æå‡ç©ºé—´ï¼</div>' : 
                                '<div class="alert alert-danger">éœ€è¦ç»§ç»­åŠªåŠ›å“¦ï¼</div>'
                            }
                        </div>
                        <button class="btn btn-primary me-2" onclick="vocabularyQuiz.restartQuiz()">
                            <i class="bi bi-arrow-repeat"></i> å†æ¬¡æµ‹è¯•
                        </button>
                        <button class="btn btn-secondary" onclick="vocabularyQuiz.backToStart()">
                            <i class="bi bi-arrow-left"></i> è¿”å›å­¦ä¹ 
                        </button>
                        <div class="card bg-light mt-4">
                            <div class="card-header">
                                <h5>è¯¦ç»†åˆ†æ</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <h6>æ­£ç¡®ç‡</h6>
                                                <h3 class="text-${percentage >= 80 ? 'success' : percentage >= 60 ? 'warning' : 'danger'}">${percentage}%</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <h6>ç­”é¢˜æ•°</h6>
                                                <h3>${this.quizQuestions.length}</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <h6>ç”¨æ—¶</h6>
                                                <h3>${Math.floor(timeTaken / 60)}åˆ†${timeTaken % 60}ç§’</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            // é‡æ–°å¼€å§‹æµ‹è¯•
            restartQuiz() {
                this.startQuiz(this.quizMode);
            }
            // è¿”å›å¼€å§‹ç•Œé¢
            backToStart() {
                document.getElementById('quiz-results-tab').classList.add('d-none');
                document.getElementById('start-quiz-tab').classList.remove('d-none');
                this.updateStatistics();
            }
            // ä¿å­˜æµ‹è¯•è®°å½• - ä¿®å¤ç‰ˆæœ¬
            async saveQuizRecord() {
                try {
                    const token = localStorage.getItem('token');
                    if (!token) return;
                    const timeTaken = Math.round((this.endTime - this.startTime) / 1000);
                    const quizRecord = {
                        type: this.quizMode,
                        score: Math.round((this.quizScore / this.quizQuestions.length) * 100),
                        questions: this.quizQuestions.length,
                        correct: this.quizScore,
                        timeTaken: timeTaken,
                        date: new Date()
                    };
                    // --- ä¿®æ”¹3: ä½¿ç”¨ä¸ä¸ƒå¹´çº§ç›¸åŒçš„ /api/quiz-records API è·¯å¾„ ---
                    const response = await fetch(`${this.apiBaseUrl}/quiz-records`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(quizRecord)
                    });
                    const result = await response.json();
                    console.log('æµ‹è¯•è®°å½•ä¿å­˜ç»“æœ:', result);
                    if (result.success) {
                        console.log('æµ‹è¯•è®°å½•ä¿å­˜æˆåŠŸ:', result.record);
                        // é‡æ–°åŠ è½½æµ‹è¯•å†å²è®°å½•
                        await this.loadQuizHistory();
                    } else {
                        throw new Error(result.error);
                    }
                } catch (error) {
                    console.error('ä¿å­˜æµ‹è¯•è®°å½•å¤±è´¥:', error);
                    // å¯ä»¥æ·»åŠ ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
                    // alert('ä¿å­˜æµ‹è¯•è®°å½•å¤±è´¥ï¼š' + error.message);
                }
            }
            // åŠ è½½æµ‹è¯•å†å²è®°å½• - ä¿®å¤ç‰ˆæœ¬
            async loadQuizHistory() {
                try {
                    const token = localStorage.getItem('token');
                    if (!token) return;
                    // --- ä¿®æ”¹4: ä½¿ç”¨ä¸ä¸ƒå¹´çº§ç›¸åŒçš„ /api/quiz-records API è·¯å¾„ ---
                    const response = await fetch(`${this.apiBaseUrl}/quiz-records`, {
                        method: 'GET',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    const result = await response.json();
                    console.log('è·å–æµ‹è¯•å†å²è®°å½•ç»“æœ:', result);
                    if (result.success) {
                        this.quizHistory = result.records || [];
                        this.renderQuizHistory();
                    } else {
                        throw new Error(result.error);
                    }
                } catch (error) {
                    console.error('åŠ è½½æµ‹è¯•å†å²è®°å½•å¤±è´¥:', error);
                    // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºåå¤‡
                    this.quizHistory = this.getMockQuizHistory();
                    this.renderQuizHistory();
                }
            }
            // è·å–æ¨¡æ‹Ÿæµ‹è¯•å†å²è®°å½•
            getMockQuizHistory() {
                return [
                    {
                        _id: '1',
                        type: 'chinese-to-english',
                        date: '2024-01-20T10:30:00Z',
                        questions: 10,
                        correct: 8,
                        score: 80,
                        timeTaken: 180
                    },
                    {
                        _id: '2',
                        type: 'english-to-chinese',
                        date: '2024-01-19T14:15:00Z',
                        questions: 10,
                        correct: 7,
                        score: 70,
                        timeTaken: 210
                    },
                    {
                        _id: '3',
                        type: 'spelling',
                        date: '2024-01-18T09:45:00Z',
                        questions: 10,
                        correct: 9,
                        score: 90,
                        timeTaken: 150
                    },
                    {
                        _id: '4',
                        type: 'chinese-to-english',
                        date: '2024-01-17T16:20:00Z',
                        questions: 10,
                        correct: 6,
                        score: 60,
                        timeTaken: 240
                    },
                    {
                        _id: '5',
                        type: 'english-to-chinese',
                        date: '2024-01-16T11:10:00Z',
                        questions: 10,
                        correct: 8,
                        score: 80,
                        timeTaken: 190
                    }
                ];
            }
            // æ¸²æŸ“æµ‹è¯•å†å²è®°å½• - ä¿®å¤ç‰ˆæœ¬
            renderQuizHistory() {
                const tableBody = document.getElementById('quiz-history-table');
                if (this.quizHistory.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="7" class="text-center">æš‚æ— æµ‹è¯•è®°å½•</td></tr>';
                    return;
                }
                let html = '';
                this.quizHistory.forEach(record => {
                    const typeName = this.getQuizTypeName(record.type);
                    const timeMinutes = Math.floor(record.timeTaken / 60);
                    const timeSeconds = record.timeTaken % 60;
                    const recordDate = new Date(record.date).toLocaleDateString();
                    html += `
                        <tr>
                            <td>${typeName}</td>
                            <td>${recordDate}</td>
                            <td>${record.questions}</td>
                            <td>${record.correct}</td>
                            <td>
                                <span class="badge ${
                                    record.score >= 80 ? 'bg-success' : 
                                    record.score >= 60 ? 'bg-warning' : 'bg-danger'
                                }">
                                    ${record.score}%
                                </span>
                            </td>
                            <td>${timeMinutes}åˆ†${timeSeconds}ç§’</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary" onclick="vocabularyQuiz.viewQuizDetails('${record._id}')">
                                    <i class="bi bi-eye"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                });
                tableBody.innerHTML = html;
                this.renderPagination();
            }
            // è·å–æµ‹è¯•ç±»å‹åç§°
            getQuizTypeName(type) {
                const typeMap = {
                    'chinese-to-english': 'ä¸­è¯‘è‹±',
                    'english-to-chinese': 'è‹±è¯‘ä¸­',
                    'spelling': 'æ‹¼å†™æµ‹è¯•'
                };
                return typeMap[type] || type;
            }
            // æŸ¥çœ‹æµ‹è¯•è¯¦æƒ…
            viewQuizDetails(recordId) {
                const record = this.quizHistory.find(r => r._id === recordId);
                if (record) {
                    alert(`
                        æµ‹è¯•è¯¦æƒ…ï¼š
                        ç±»å‹ï¼š${this.getQuizTypeName(record.type)}
                        æ—¥æœŸï¼š${new Date(record.date).toLocaleString('zh-CN')}
                        é¢˜ç›®æ•°ï¼š${record.questions}
                        æ­£ç¡®æ•°ï¼š${record.correct}
                        å¾—åˆ†ï¼š${record.score}%
                        ç”¨æ—¶ï¼š${Math.floor(record.timeTaken / 60)}åˆ†${record.timeTaken % 60}ç§’
                    `);
                }
            }
            // æ¸²æŸ“åˆ†é¡µ
            renderPagination() {
                const pagination = document.getElementById('quiz-history-pagination');
                this.totalPages = Math.ceil(this.quizHistory.length / this.pageSize);

                if (this.totalPages <= 1) {
                    pagination.innerHTML = '';
                    return;
                }

                let html = '';

                // ä¸Šä¸€é¡µ
                html += `
                    <li class="page-item ${this.currentPage === 1 ? 'disabled' : ''}">
                        <a class="page-link" href="#" onclick="vocabularyQuiz.goToPage(${this.currentPage - 1})">ä¸Šä¸€é¡µ</a>
                    </li>
                `;

                // é¡µç 
                for (let i = 1; i <= this.totalPages; i++) {
                    html += `
                        <li class="page-item ${i === this.currentPage ? 'active' : ''}">
                            <a class="page-link" href="#" onclick="vocabularyQuiz.goToPage(${i})">${i}</a>
                        </li>
                    `;
                }

                // ä¸‹ä¸€é¡µ
                html += `
                    <li class="page-item ${this.currentPage === this.totalPages ? 'disabled' : ''}">
                        <a class="page-link" href="#" onclick="vocabularyQuiz.goToPage(${this.currentPage + 1})">ä¸‹ä¸€é¡µ</a>
                    </li>
                `;

                pagination.innerHTML = html;
            }
            // è·³è½¬åˆ°æŒ‡å®šé¡µé¢
            goToPage(page) {
                if (page >= 1 && page <= this.totalPages) {
                    this.currentPage = page;
                    this.renderQuizHistory();
                }
            }
            // ç­›é€‰æµ‹è¯•
            filterQuiz(filterType) {
                alert(`ç­›é€‰åŠŸèƒ½å°†åœ¨åç»­ç‰ˆæœ¬ä¸­å®ç°ï¼å½“å‰ç­›é€‰: ${filterType}`);
            }
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStatistics() {
                const totalWords = this.vocabulary.length;
                const masteredWords = 0; // è¿™é‡Œåº”è¯¥ä»åç«¯è·å–å®é™…æ•°æ®
                const reviewWords = 0; // è¿™é‡Œåº”è¯¥ä»åç«¯è·å–å®é™…æ•°æ®
                const masteryRate = totalWords > 0 ? Math.round((masteredWords / totalWords) * 100) : 0;
                document.getElementById('total-tests').textContent = totalWords;
                document.getElementById('accuracy-rate').textContent = `${masteryRate}%`;
                // æ›´æ–°è¿›åº¦æ¡
                document.getElementById('progress-bar').style.width = `${masteryRate}%`;
                document.getElementById('progress-text').textContent = `${masteredWords}/${totalWords}`;
            }
        }
        // åˆ›å»ºå…¨å±€è¯æ±‡æµ‹è¯•ç³»ç»Ÿå®ä¾‹
        const vocabularyQuiz = new VocabularyQuizSystem();
        // ç™»å‡ºæŒ‰é’®äº‹ä»¶
        document.getElementById('logout-btn').addEventListener('click', () => {
            apiService.logout();
            window.location.href = 'index.html';
        });
        // ç™»å½•æŒ‰é’®äº‹ä»¶
        document.getElementById('login-btn').addEventListener('click', () => {
            window.location.href = 'login.html';
        });
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            // æ£€æŸ¥ç™»å½•çŠ¶æ€
            const user = await vocabularyQuiz.checkLogin();
            if (!user) {
                return;
            }
			// æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
            vocabularyQuiz.updateUIForUser(user);
            // åŠ è½½ç”¨æˆ·è¯æ±‡ (äº”å¹´çº§)
            await vocabularyQuiz.loadUserVocabulary();
            // åŠ è½½æµ‹è¯•å†å²è®°å½•
            await vocabularyQuiz.loadQuizHistory();
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            vocabularyQuiz.updateStatistics();
        });
        // å…¨å±€å‡½æ•°ç»‘å®š
        function flipCard() {
            vocabularyQuiz.flipCard();
        }
        function prevCard() {
            vocabularyQuiz.prevCard();
        }
        function nextCard() {
            vocabularyQuiz.nextCard();
        }
        function markAsLearned() {
            vocabularyQuiz.markAsLearned();
        }
        function addToReview() {
            vocabularyQuiz.addToReview();
        }
        function filterQuiz(filterType) {
            vocabularyQuiz.filterQuiz(filterType);
        }
        function startQuiz(mode) {
            vocabularyQuiz.startQuiz(mode);
        }
        function checkSpellingAnswer() {
            vocabularyQuiz.checkSpellingAnswer();
        }
        function checkMultipleChoiceAnswer(selectedAnswer) {
            vocabularyQuiz.checkMultipleChoiceAnswer(selectedAnswer);
        }
        function restartQuiz() {
            vocabularyQuiz.restartQuiz();
        }
        function backToStart() {
            vocabularyQuiz.backToStart();
        }
        function viewQuizDetails(recordId) {
            vocabularyQuiz.viewQuizDetails(recordId);
        }
        function goToPage(page) {
            vocabularyQuiz.goToPage(page);
        }
    </script>
</body>
</html>